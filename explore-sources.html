<!DOCTYPE html>
<html>
<head>
    <title>æ¢ç´¢éŸ³æ¨‚æº</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f5f5f5; }
        .container { max-width: 900px; margin: 0 auto; }
        .api-test { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h3 { margin-top: 0; color: #333; }
        pre { background: #f0f0f0; padding: 10px; overflow-x: auto; font-size: 12px; border-radius: 4px; max-height: 300px; overflow-y: auto; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        button { background: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; margin: 5px 0; }
        button:hover { background: #0056b3; }
        audio { width: 100%; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ¢ç´¢å¯ç”¨çš„éŸ³æ¨‚æº</h1>
        
        <div class="api-test">
            <h3>1. æª¢æŸ¥ Meting API è¿”å›çš„å®Œæ•´æ•¸æ“š</h3>
            <button onclick="checkMetingData()">æŸ¥çœ‹å®Œæ•´æ•¸æ“šçµæ§‹</button>
            <div id="meting-data"></div>
        </div>

        <div class="api-test">
            <h3>2. å˜—è©¦ QQ éŸ³æ¨‚</h3>
            <button onclick="searchQQ()">æœç´¢ QQ éŸ³æ¨‚</button>
            <div id="qq-data"></div>
        </div>

        <div class="api-test">
            <h3>3. å˜—è©¦å…¶ä»– API</h3>
            <button onclick="tryOtherApis()">æ¸¬è©¦å…¶ä»– API</button>
            <div id="other-api"></div>
        </div>
    </div>

    <script>
        async function checkMetingData() {
            const div = document.getElementById('meting-data');
            div.innerHTML = 'â³ åŠ è¼‰ä¸­...';
            
            try {
                const res = await fetch('https://meting-api-alpha-gilt.vercel.app/api?type=song&id=2647102754');
                const data = await res.json();
                
                div.innerHTML = `
                    <div class="status success">âœ… éŸ¿æ‡‰æˆåŠŸ</div>
                    <h4>å®Œæ•´æ•¸æ“š:</h4>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                    <h4>æ‰€æœ‰å­—æ®µ:</h4>
                    <ul>
                        ${Object.keys(data).map(key => `<li><strong>${key}:</strong> ${typeof data[key] === 'object' ? JSON.stringify(data[key]) : data[key]}</li>`).join('')}
                    </ul>
                `;
            } catch (e) {
                div.innerHTML = `<div class="status error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }

        async function searchQQ() {
            const div = document.getElementById('qq-data');
            div.innerHTML = 'â³ æœç´¢ä¸­...';
            
            try {
                const res = await fetch('https://meting-api-alpha-gilt.vercel.app/api?server=qq&type=search&s=ä¸ƒé‡Œé¦™&limit=5');
                const data = await res.json();
                
                if (!data.results || data.results.length === 0) {
                    div.innerHTML = '<div class="status error">âŒ æ‰¾ä¸åˆ° QQ éŸ³æ¨‚çµæœ</div>';
                    return;
                }
                
                let html = '<div class="status success">âœ… æ‰¾åˆ°çµæœ</div>';
                
                for (let i = 0; i < Math.min(3, data.results.length); i++) {
                    const song = data.results[i];
                    html += `<h4>${i+1}. ${song.name} - ${song.artist}</h4>`;
                    
                    try {
                        const songRes = await fetch(`https://meting-api-alpha-gilt.vercel.app/api?server=qq&type=song&id=${song.id}`);
                        const songData = await songRes.json();
                        
                        html += `<pre>${JSON.stringify(songData, null, 2)}</pre>`;
                        
                        if (songData.url) {
                            html += `<p>âœ… æœ‰æ’­æ”¾éˆæ¥: <code>${songData.url.substring(0, 80)}...</code></p>`;
                            html += `<audio controls><source src="${songData.url}"></audio>`;
                        }
                    } catch (e) {
                        html += `<p>âŒ ç„¡æ³•ç²å–è©³æƒ…: ${e.message}</p>`;
                    }
                }
                
                div.innerHTML = html;
            } catch (e) {
                div.innerHTML = `<div class="status error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }

        async function tryOtherApis() {
            const div = document.getElementById('other-api');
            div.innerHTML = 'â³ æ¸¬è©¦ä¸­...';
            
            const apis = [
                {
                    name: 'ç¶²æ˜“é›² (api.neteasecloudmusic.com)',
                    url: 'https://api.neteasecloudmusic.com/search?keywords=ä¸ƒé‡Œé¦™&type=1&limit=5'
                },
                {
                    name: 'YesPlayMusic',
                    url: 'https://music-api.vercel.app/search?keywords=ä¸ƒé‡Œé¦™&limit=5'
                },
                {
                    name: 'musicapi (å‚™é¸)',
                    url: 'https://musicapi.aitune.io/search?keywords=ä¸ƒé‡Œé¦™&limit=5'
                }
            ];
            
            let html = '';
            
            for (const api of apis) {
                html += `<h4>${api.name}</h4>`;
                try {
                    const res = await fetch(api.url);
                    if (res.ok) {
                        const data = await res.json();
                        html += `<div class="status success">âœ… HTTP ${res.status}</div>`;
                        html += `<pre>${JSON.stringify(data).substring(0, 500)}...</pre>`;
                    } else {
                        html += `<div class="status error">âŒ HTTP ${res.status}</div>`;
                    }
                } catch (e) {
                    html += `<div class="status error">âŒ é€£æ¥å¤±æ•—: ${e.message}</div>`;
                }
                html += '<hr>';
            }
            
            div.innerHTML = html;
        }
    </script>
</body>
</html>
