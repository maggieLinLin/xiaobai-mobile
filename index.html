<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light only">
    <meta name="supported-color-schemes" content="light">
    <style>
        html{color-scheme:light only!important;-webkit-color-scheme:light!important;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)!important}
        body{color-scheme:light only!important;-webkit-color-scheme:light!important}
    </style>
    <script>
        (function(){document.documentElement.style.colorScheme='light';document.documentElement.style.webkitColorScheme='light';})();
    </script>
    <title>Â∞èÁôΩÊú∫</title>
    <link rel="stylesheet" href="css/base.css?v=5">
    <link rel="stylesheet" href="css/phone.css?v=5">
    <link rel="stylesheet" href="css/settings.css?v=5">
    <link rel="stylesheet" href="css/home.css?v=5">
    <link rel="stylesheet" href="css/apps.css?v=5">
    <link rel="stylesheet" href="css/linee-all.css?v=5">
    <link rel="stylesheet" href="css/force-light.css?v=5">
    <meta name="color-scheme" content="light">
    <meta name="theme-color" content="#A0D8EF">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>
    <div id="phone-container">
        <div id="phone-frame">
            <div id="notch"></div>
            <div id="status-bar">
                <span id="status-time"></span>
                <span id="status-battery">
                    <span id="battery-level">100%</span>
                    <span id="battery-icon">üîã</span>
                </span>
            </div>
            <div id="pull-hint" style="background:transparent;display:none">‚¨á ‰∏ãÊãâÊâìÂºÄËÆæÁΩÆ / ÁÇπÂáªÁÅµÂä®Â≤õ ‚¨Ü</div>

            <div id="settings-page" class="hidden">
                <div class="settings-header">
                    <h2>ËÆæÁΩÆ</h2>
                    <button id="close-settings">√ó</button>
                </div>
                <div class="settings-content">
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="api">API</button>
                        <button class="tab-btn" data-tab="font">Â≠ó‰Ωì</button>
                        <button class="tab-btn" data-tab="beauty">ÁæéÂåñ</button>
                    </div>

                    <div class="tab-content active" id="tab-api">
                        <h3>ü§ñ API ÈÖçÁΩÆ</h3>
                        <div style="font-size:11px;color:#999;margin-bottom:10px">‚ö† ‰∏çÈúÄË¶ÅÂä† /v1</div>
                        <input type="text" id="api-url" placeholder="API Âèç‰ª£Âú∞ÂùÄ">
                        <input type="password" id="api-key" placeholder="API ÂØÜÈí•">
                        <button id="fetch-models">ÊãâÂèñÊ®°Âûã</button>
                        <select id="model-select"><option>ËØ∑ÂÖàÊãâÂèñÊ®°Âûã</option></select>
                        <label>Ê®°ÂûãÊ∏©Â∫¶: <span id="temp-value">0.7</span></label>
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7" style="width:100%">
                        <label style="display:flex;align-items:center;gap:10px;margin:15px 0">
                            <input type="checkbox" id="enable-system-role">ÂêØÁî®ÂêéÂè∞ËßíËâ≤
                        </label>
                        <div style="font-size:11px;color:red;margin-top:-10px;margin-bottom:15px">‚ö† ÂºÄÂêØÂêéÂ∞ÜËá™Âä®Â¢ûÂä†È¢ùÂ∫¶Ë∞ÉÁî®</div>
                        
                        <h4>üíæ API ÈÖçÁΩÆÂàóË°®</h4>
                        <div style="display:flex;gap:10px;margin-bottom:10px">
                            <input type="text" id="api-config-name" placeholder="ÈÖçÁΩÆÂêçÁß∞" style="flex:1">
                            <button id="save-api-config" style="margin:0">‰øùÂ≠ò</button>
                        </div>
                        <select id="api-config-list" size="4" style="width:100%;margin-bottom:10px;padding:8px;border-radius:10px;border:2px solid #e8e8e8"></select>
                        <div style="display:flex;gap:10px">
                            <button id="load-api-config" style="flex:1;margin:0;background:linear-gradient(135deg,#28a745,#20873a)">Âä†ËΩΩÈÄâ‰∏≠</button>
                            <button id="delete-api-config" style="flex:1;margin:0;background:linear-gradient(135deg,#dc3545,#c82333)">Âà†Èô§ÈÄâ‰∏≠</button>
                        </div>
                        
                        <h4 style="margin-top:20px">üéô Minimax TTS</h4>
                        <div style="font-size:11px;color:#666;margin-bottom:10px">ËØ•ËÆæÁΩÆÁî®‰∫éÊèê‰æõAIËØ≠Èü≥‰ø°ÊÅØ</div>
                        <input type="text" id="minimax-group-id" placeholder="Minimax Group ID">
                        <input type="password" id="minimax-api-key" placeholder="Minimax API Key">
                        <button id="fetch-tts-models">ÊãâÂèñËØ≠Èü≥Ê®°Âûã</button>
                        <select id="tts-model-select"><option>ËØ∑ÂÖàÊãâÂèñÊ®°Âûã</option></select>
                        
                        <h4 style="margin-top:15px">üíæ TTS ÈÖçÁΩÆÂàóË°®</h4>
                        <div style="display:flex;gap:10px;margin-bottom:10px">
                            <input type="text" id="tts-config-name" placeholder="ÈÖçÁΩÆÂêçÁß∞" style="flex:1">
                            <button id="save-tts-config" style="margin:0">‰øùÂ≠ò</button>
                        </div>
                        <select id="tts-config-list" size="3" style="width:100%;margin-bottom:10px;padding:8px;border-radius:10px;border:2px solid #e8e8e8"></select>
                        <div style="display:flex;gap:10px">
                            <button id="load-tts-config" style="flex:1;margin:0;background:linear-gradient(135deg,#28a745,#20873a)">Âä†ËΩΩÈÄâ‰∏≠</button>
                            <button id="delete-tts-config" style="flex:1;margin:0;background:linear-gradient(135deg,#dc3545,#c82333)">Âà†Èô§ÈÄâ‰∏≠</button>
                        </div>
                        
                        <button id="save-api" style="width:100%;margin-top:25px">‰øùÂ≠òÂΩìÂâçÊâÄÊúâËÆæÂÆö</button>
                        <div style="display:flex;gap:10px;margin-top:10px">
                            <button id="export-api" style="flex:1;margin:0">ÂØºÂá∫ API ËÆæÂÆö</button>
                            <button id="import-api" style="flex:1;margin:0">ÂØºÂÖ• API ËÆæÂÆö</button>
                        </div>
                        
                        <h4 style="margin-top:25px;color:#d9534f">üì¶ ÂÖ®Êú∫Êï∞ÊçÆ</h4>
                        <div class="btn-group">
                            <button id="export-all-data" style="background:linear-gradient(135deg,#28a745,#20873a)">ÂØºÂá∫ÂÖ®Êú∫Êï∞ÊçÆ</button>
                            <button id="import-all-data" style="background:linear-gradient(135deg,#17a2b8,#138496)">ÂØºÂÖ•ÂÖ®Êú∫Êï∞ÊçÆ</button>
                            <button id="clear-all-data" style="background:linear-gradient(135deg,#dc3545,#c82333)">Ê∏ÖÈô§Êú¨Êú∫Êï∞ÊçÆ</button>
                        </div>
                    </div>

                    <div class="tab-content" id="tab-font">
                        <h3>üî§ Â≠ó‰ΩìËÆæÁΩÆ</h3>
                        <a href="https://www.tsanger.cn/" target="_blank" style="display:inline-block;padding:10px 20px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;text-decoration:none;border-radius:10px;margin-bottom:15px;font-size:13px">üåê Êõ¥Â§öÂ≠ó‰ΩìÔºàÈúÄË¶ÅÈ≠îÊ≥ïÔºâ</a>
                        <label>Â≠ó‰Ωì URL:</label>
                        <input type="text" id="font-url" placeholder="ËæìÂÖ•Â≠ó‰Ωì URL (.ttf, .woff, .woff2)">
                        <button id="apply-font-url">Â∫îÁî® URL Â≠ó‰Ωì</button>
                        <label style="margin-top:15px">Êú¨Âú∞Â≠ó‰Ωì:</label>
                        <input type="file" id="font-upload" accept=".ttf,.woff,.woff2">
                        <button id="apply-font-file">Â∫îÁî®Êú¨Âú∞Â≠ó‰Ωì</button>
                        <div id="font-preview" style="margin:20px 0;padding:20px;background:rgba(0,0,0,0.05);border-radius:15px;text-align:center">
                            <div style="font-size:14px;color:#666;margin-bottom:10px">Â≠ó‰ΩìÈ¢ÑËßà</div>
                            <div id="preview-text" style="font-size:18px">Ê¨¢Ëøé‰ΩøÁî®Â∞èÁôΩÊú∫</div>
                        </div>
                        <button id="reset-font">ÊÅ¢Â§çÈªòËÆ§Â≠ó‰Ωì</button>
                    </div>

                    <div class="tab-content" id="tab-beauty">
                        <h3>üé® ‰∏ªÈ¢ò</h3>
                        <div class="theme-grid">
                            <button class="theme-btn" data-theme="cinnamoroll">ÁéâÊ°ÇÁãó</button>
                            <button class="theme-btn" data-theme="hellokitty">Hello Kitty</button>
                            <button class="theme-btn" data-theme="kuromi">Â∫ìÊ¥õÁ±≥</button>
                            <button class="theme-btn" data-theme="mymelody">Áæé‰πêËíÇ</button>
                        </div>
                        <h3 style="margin-top:20px">‚ú® Ëá™ÂÆö‰πâ</h3>
                        <label>Â£ÅÁ∫∏ URL:</label>
                        <input type="text" id="wallpaper-url" placeholder="ËæìÂÖ•Â£ÅÁ∫∏ÂõæÁâá URL">
                        <button id="apply-wallpaper-url">‰øùÂ≠òÂ£ÅÁ∫∏</button>
                        <label style="margin-top:10px">Êú¨Âú∞Â£ÅÁ∫∏: <input type="file" id="wallpaper-upload" accept="image/*"></label>
                        <label>ËæπÊ°ÜÈ¢úËâ≤: <input type="color" id="frame-color"></label>
                        <button id="toggle-fullscreen">Âº∫Âà∂ÂÖ®Â±è</button>
                        <h3 style="margin-top:20px">üíÖ CSS</h3>
                        <textarea id="custom-css" placeholder="Ëá™ÂÆö‰πâ CSS..."></textarea>
                        <button id="apply-css">Â∫îÁî®</button>
                        <h3 style="margin-top:20px">üì¶ Â•óË£Ö</h3>
                        <button id="export-theme">ÂØºÂá∫</button>
                        <button id="import-theme">ÂØºÂÖ•</button>
                        
                        <h3 style="margin-top:20px;color:#d9534f">üßπ Ê∏ÖÈô§Êï∞ÊçÆ</h3>
                        <button id="clear-beauty-data" style="width:100%;background:linear-gradient(135deg,#dc3545,#c82333)">Ê∏ÖÈô§ÂÖ®Â±ÄÁæéÂåñÊï∞ÊçÆ</button>
                    </div>
                </div>
            </div>

            <div id="home-screen">
                <div id="home-pages">
                    <div class="home-page active">
                        <!-- Êó∂Èó¥ÁªÑ‰ª∂ - È°∂ÈÉ®‰∏≠Â§Æ -->
                        <div id="time-widget" class="widget">
                            <div id="current-time"></div>
                            <input type="text" id="current-date" placeholder="Ê¨¢Ëøé‰ΩøÁî®Â∞èÁôΩÊú∫" style="border:none;background:transparent;text-align:center;outline:none;cursor:text;font-size:12px;width:100%;color:#333">
                        </div>
                        
                        <!-- Êó•ÂéÜÁªÑ‰ª∂ - Âè≥‰∏äËßí -->
                        <div id="calendar-widget" class="widget"></div>
                        
                        <!-- ‰ªªÂä°Ê†è - Â∑¶‰∏ãËßí -->
                        <textarea id="today-memo-widget" placeholder="‰ªäÂ§©Ê≤°Êúâ‰ªªÂä°" rows="1"></textarea>
                        
                        <!-- Â∫îÁî®ÂõæÊ†á - ÂØπËßíÁ∫øÊéíÂàó -->
                        <div class="app-icon app-icon-1" data-app="linee">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23A0D8EF'/%3E%3Ctext x='22' y='28' font-size='24' text-anchor='middle' fill='white'%3EL%3C/text%3E%3C/svg%3E">
                            <span>Linee</span>
                        </div>
                        <div class="app-icon app-icon-2" data-app="developing">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%234A90E2'/%3E%3Ctext x='22' y='28' font-size='24' text-anchor='middle' fill='white'%3Eüåç%3C/text%3E%3C/svg%3E">
                            <span>‰∏ñÁïå‰π¶</span>
                        </div>
                        <div class="app-icon app-icon-3" data-app="developing">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23FF2442'/%3E%3Ctext x='22' y='28' font-size='24' text-anchor='middle' fill='white'%3EÂ∞è%3C/text%3E%3C/svg%3E">
                            <span>Â∞èÁ∫¢‰π¶</span>
                        </div>
                        <div class="app-icon app-icon-4" data-app="developing">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%2307C160'/%3E%3Ctext x='22' y='28' font-size='24' text-anchor='middle' fill='white'%3EIM%3C/text%3E%3C/svg%3E">
                            <span>IM</span>
                        </div>
                    </div>
                    <div class="home-page">
                        <!-- Èü≥‰πêÁªÑ‰ª∂ - Á¨¨‰∫åÈ°µÊúÄ‰∏äÊñπ -->
                        <div id="music-widget" class="widget music-full">
                            <div class="music-cover-art">
                                <div class="music-vinyl">üéµ</div>
                            </div>
                            <div class="music-info">
                                <div class="music-title">Êú™Êí≠Êîæ</div>
                                <div class="music-artist">Ê∑ªÂä†Èü≥‰πêÂºÄÂßãÊí≠Êîæ</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                            </div>
                            <div class="music-controls">
                                <button id="music-prev" class="control-btn">‚èÆ</button>
                                <button id="music-play" class="control-btn play-btn">‚ñ∂</button>
                                <button id="music-next" class="control-btn">‚è≠</button>
                            </div>
                            <div class="music-actions">
                                <button id="music-search" class="action-btn" title="ÊêúÁ¥¢Èü≥‰πê">üîç</button>
                                <button id="music-add" class="action-btn" title="Ê∑ªÂä†Èü≥‰πê">‚ûï</button>
                                <button id="music-list" class="action-btn" title="ÊàëÁöÑÊ≠åÂçï">‚ò∞</button>
                            </div>
                        </div>
                        <div class="app-grid">
                            <div class="app-icon developing">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23999'/%3E%3Ctext x='22' y='28' font-size='16' text-anchor='middle' fill='white'%3EÂºÄÂèë‰∏≠%3C/text%3E%3C/svg%3E">
                                <span>ÂºÄÂèë‰∏≠</span>
                            </div>
                            <div class="app-icon developing">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23999'/%3E%3Ctext x='22' y='28' font-size='16' text-anchor='middle' fill='white'%3EÂºÄÂèë‰∏≠%3C/text%3E%3C/svg%3E">
                                <span>ÂºÄÂèë‰∏≠</span>
                            </div>
                            <div class="app-icon developing">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23999'/%3E%3Ctext x='22' y='28' font-size='16' text-anchor='middle' fill='white'%3EÂºÄÂèë‰∏≠%3C/text%3E%3C/svg%3E">
                                <span>ÂºÄÂèë‰∏≠</span>
                            </div>
                            <div class="app-icon developing">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 44 44'%3E%3Crect width='44' height='44' rx='10' fill='%23999'/%3E%3Ctext x='22' y='28' font-size='16' text-anchor='middle' fill='white'%3EÂºÄÂèë‰∏≠%3C/text%3E%3C/svg%3E">
                                <span>ÂºÄÂèë‰∏≠</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="page-indicator">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                </div>
            </div>

            <div id="linee-app" class="app-window hidden">
                <div id="linee-app-content">
                    <!-- Main Content - Home Tab -->
                    <div class="linee-main" id="linee-tab-home">
                        <!-- Linee Header -->
                        <div class="linee-header" style="margin-top: 32px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="linee-icon-btn" onclick="closeApp()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                                <div class="linee-title">LINEE</div>
                            </div>
                            <div class="linee-actions">
                                <button class="linee-icon-btn" id="linee-btn-favorites"><ion-icon name="star-outline"></ion-icon></button>
                                <button class="linee-icon-btn" id="linee-btn-notifications"><ion-icon name="notifications-outline"></ion-icon></button>
                                <div style="position:relative;">
                                    <button class="linee-icon-btn" id="linee-btn-add"><ion-icon name="person-add-outline"></ion-icon></button>
                                    <div class="linee-popover hidden" id="linee-add-popover">
                                        <div class="linee-popover-item" id="linee-opt-add-friend">
                                            <ion-icon name="person-outline"></ion-icon> Âä†ÂÖ•Â•ΩÂèã
                                        </div>
                                        <div class="linee-popover-item" id="linee-opt-add-group">
                                            <ion-icon name="people-outline"></ion-icon> Âª∫Á´ãÁæ§ÁªÑ
                                        </div>
                                    </div>
                                </div>
                                <button class="linee-icon-btn" id="linee-btn-settings"><ion-icon name="settings-outline"></ion-icon></button>
                            </div>
                        </div>
                        <!-- Profile Section -->
                        <div class="linee-profile">
                            <div class="linee-profile-row" id="linee-profile-clickable" style="cursor:pointer;">
                                <div class="linee-profile-info">
                                    <div class="linee-name" id="linee-display-name">ÊàëÁöÑÂêçÂ≠ó</div>
                                    <div class="linee-status" id="linee-display-status">ËÆæÂÆöÁä∂ÊÄÅÊ∂àÊÅØ...</div>
                                </div>
                                <div class="linee-avatar">
                                    <img id="linee-display-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar">
                                    <div class="linee-edit-badge">‚úèÔ∏è</div>
                                </div>
                            </div>
                            
                            <!-- Persona Cards -->
                            <div class="linee-cards">
                                <div class="linee-card active">Êó•Â∏∏</div>
                                <div class="linee-card">Â∑•‰Ωú</div>
                                <div class="linee-card">‰ºëÈó≤</div>
                            </div>
                        </div>

                        <!-- Search Bar -->
                        <div class="linee-search-section">
                            <div class="linee-search">
                                <ion-icon name="search-outline" class="linee-search-icon"></ion-icon>
                                <input type="text" placeholder="ÊêúÁ¥¢Â•ΩÂèã„ÄÅÁæ§ÁªÑ" id="linee-search-input">
                            </div>
                        </div>

                        <!-- Lists -->
                        <div class="linee-lists">
                            <!-- Birthdays -->
                            <div class="linee-list-group" id="linee-group-birthdays">
                                <div class="linee-list-header">
                                    <div class="linee-header-text">
                                        <span class="linee-list-title">ÂΩìÊúàÂØøÊòü</span>
                                        <span class="linee-list-subtitle">Â∞èÊòé, Amy, Jason...</span>
                                    </div>
                                    <ion-icon name="chevron-forward-outline" class="linee-arrow"></ion-icon>
                                </div>
                            </div>

                            <!-- Favorites -->
                            <div class="linee-list-group" id="linee-group-favorites">
                                <div class="linee-list-header">
                                    <div class="linee-header-text">
                                        <span class="linee-list-title">ÊàëÁöÑÊúÄÁà±</span>
                                        <span class="linee-list-subtitle">Â¶àÂ¶à, ËÄÅÊùø, Bestie...</span>
                                    </div>
                                    <ion-icon name="chevron-forward-outline" class="linee-arrow"></ion-icon>
                                </div>
                            </div>

                            <!-- Friends -->
                            <div class="linee-list-group expanded" id="linee-group-friends">
                                <div class="linee-list-header" onclick="toggleLineeList('linee-friends-list', this)">
                                    <div class="linee-header-text">
                                        <span class="linee-list-title">Â•ΩÂèã</span>
                                        <span class="linee-list-count" id="linee-friend-count">(5)</span>
                                    </div>
                                    <ion-icon name="chevron-forward-outline" class="linee-arrow"></ion-icon>
                                </div>
                                <div class="linee-list-content" id="linee-friends-list">
                                    <!-- Dynamic Friend Items -->
                                </div>
                            </div>

                            <!-- Groups -->
                            <div class="linee-list-group" id="linee-group-groups">
                                <div class="linee-list-header" onclick="toggleLineeList('linee-groups-list', this)">
                                    <div class="linee-header-text">
                                        <span class="linee-list-title">Áæ§ÁªÑ</span>
                                        <span class="linee-list-count" id="linee-group-count">(2)</span>
                                    </div>
                                    <ion-icon name="chevron-forward-outline" class="linee-arrow"></ion-icon>
                                </div>
                                <div class="linee-list-content hidden" id="linee-groups-list">
                                    <!-- Dynamic Group Items -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content - Chats Tab -->
                    <div class="linee-main" id="linee-tab-chats" style="display: none; padding: 0;">
                        <!-- Chat Header -->
                        <div class="linee-header" style="margin-top: 32px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="linee-icon-btn" onclick="document.querySelectorAll('.linee-nav-item')[0].click()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                                <div class="linee-title">ËÅäÂ§©</div>
                            </div>
                            <div class="linee-actions">
                                <button class="linee-icon-btn"><ion-icon name="image-outline"></ion-icon></button>
                                <button class="linee-icon-btn"><ion-icon name="add-circle-outline"></ion-icon></button>
                                <button class="linee-icon-btn"><ion-icon name="ellipsis-vertical"></ion-icon></button>
                            </div>
                        </div>
                        <!-- Search Bar -->
                        <div style="padding: 12px 16px; background: #FFFFFF;">
                            <div style="position: relative;">
                                <ion-icon name="search-outline" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 16px; color: #9CA3AF;"></ion-icon>
                                <input type="text" placeholder="ÊêúÂØªËÅäÂ§©ËÆ∞ÂΩï" style="width: 100%; padding: 8px 12px 8px 36px; border: none; border-radius: 12px; background: #E8F6FA; font-size: 14px; outline: none;" />
                            </div>
                        </div>
                        <!-- Chat List -->
                        <div id="linee-chat-list" style="overflow-y: auto; padding-bottom: 80px;"></div>
                    </div>

                    <!-- Chat Room -->
                    <div id="linee-chat-room" style="display: none; flex-direction: column; height: 100%; position: relative; z-index: 50;">
                        <!-- Chat Room Header -->
                        <div class="linee-header" style="margin-top: 32px; height: 56px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="linee-icon-btn" onclick="closeChatRoom()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                                <div class="linee-title" id="chat-room-name" style="max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></div>
                            </div>
                            <div class="linee-actions">
                                <button class="linee-icon-btn"><ion-icon name="search-outline"></ion-icon></button>
                                <button class="linee-icon-btn"><ion-icon name="call-outline"></ion-icon></button>
                                <button class="linee-icon-btn"><ion-icon name="ellipsis-vertical"></ion-icon></button>
                            </div>
                        </div>
                        <!-- Messages -->
                        <div id="chat-messages-container" style="flex: 1; overflow-y: auto; padding: 16px; background: #FFFFFF;"></div>
                        <!-- Input Area -->
                        <div style="border-top: 1px solid #F5F5F5; background: #FFFFFF;">
                            <!-- Toolbar -->
                            <div style="display: flex; align-items: center; gap: 8px; padding: 8px; min-height: 56px;">
                                <!-- Left Actions -->
                                <div style="display: flex; align-items: center; gap: 4px; flex-shrink: 0;">
                                    <button class="linee-icon-btn" onclick="togglePlusMenu()" id="plus-menu-btn"><ion-icon name="add-outline"></ion-icon></button>
                                    <button class="linee-icon-btn" onclick="promptImageMessage()"><ion-icon name="image-outline"></ion-icon></button>
                                    <button class="linee-icon-btn" onclick="promptAudioMessage()"><ion-icon name="mic-outline"></ion-icon></button>
                                </div>
                                <!-- Center Input -->
                                <div style="flex: 1; position: relative; display: flex; align-items: center;">
                                    <input type="text" id="chat-input-field" placeholder="ËæìÂÖ•ËÆØÊÅØ..." onkeydown="if(event.key==='Enter') sendChatMessage()" style="width: 100%; background: #F3F4F6; border-radius: 20px; padding: 10px 40px 10px 16px; font-size: 14px; color: #333; border: none; outline: none;" />
                                    <button onclick="sendChatMessage()" style="position: absolute; right: 6px; padding: 6px; background: #A0D8EF; color: #FFFFFF; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;"><ion-icon name="send" style="font-size: 16px; margin-left: 2px; margin-top: 2px;"></ion-icon></button>
                                </div>
                                <!-- Right Actions -->
                                <div style="display: flex; align-items: center; gap: 4px; flex-shrink: 0;">
                                    <button class="linee-icon-btn" onclick="handleAIRead()" style="color: #F59E0B;"><ion-icon name="bulb-outline"></ion-icon></button>
                                    <button class="linee-icon-btn"><ion-icon name="happy-outline"></ion-icon></button>
                                </div>
                            </div>
                            <!-- Plus Menu -->
                            <div id="plus-menu" style="display: none; grid-template-columns: repeat(4, 1fr); gap: 16px; padding: 16px; background: #F9FAFB; border-top: 1px solid #F5F5F5;">
                                <button onclick="alert('ÈÄÅÁ§ºÁâ©')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px; background: none; border: none; cursor: pointer;">
                                    <div style="width: 48px; height: 48px; background: #FFFFFF; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); color: #A0D8EF;"><ion-icon name="gift-outline" style="font-size: 24px;"></ion-icon></div>
                                    <span style="font-size: 11px; color: #6B7280;">ÈÄÅÁ§ºÁâ©</span>
                                </button>
                                <button onclick="alert('ËΩ¨Â∏ê')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px; background: none; border: none; cursor: pointer;">
                                    <div style="width: 48px; height: 48px; background: #FFFFFF; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); color: #A0D8EF;"><ion-icon name="swap-horizontal-outline" style="font-size: 24px;"></ion-icon></div>
                                    <span style="font-size: 11px; color: #6B7280;">ËΩ¨Â∏ê</span>
                                </button>
                                <button onclick="alert('ÊåëÊó•Â≠ê')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px; background: none; border: none; cursor: pointer;">
                                    <div style="width: 48px; height: 48px; background: #FFFFFF; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); color: #A0D8EF;"><ion-icon name="calendar-outline" style="font-size: 24px;"></ion-icon></div>
                                    <span style="font-size: 11px; color: #6B7280;">ÊåëÊó•Â≠ê</span>
                                </button>
                                <button onclick="alert('ÂàÜ‰∫´‰ΩçÁΩÆ')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px; background: none; border: none; cursor: pointer;">
                                    <div style="width: 48px; height: 48px; background: #FFFFFF; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); color: #A0D8EF;"><ion-icon name="location-outline" style="font-size: 24px;"></ion-icon></div>
                                    <span style="font-size: 11px; color: #6B7280;">ÂàÜ‰∫´‰ΩçÁΩÆ</span>
                                </button>
                                <button onclick="alert('‰º†ÈÄÅËøûÁªì')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 8px; background: none; border: none; cursor: pointer;">
                                    <div style="width: 48px; height: 48px; background: #FFFFFF; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); color: #A0D8EF;"><ion-icon name="link-outline" style="font-size: 24px;"></ion-icon></div>
                                    <span style="font-size: 11px; color: #6B7280;">‰º†ÈÄÅËøûÁªì</span>
                                </button>
                            </div>
                        </div>
                        <!-- Prompt Modal -->
                        <div id="prompt-modal" style="display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.2); z-index: 60; align-items: center; justify-content: center; padding: 0 32px;">
                            <div style="background: #FFFFFF; border-radius: 16px; padding: 24px; width: 100%; box-shadow: 0 8px 24px rgba(0,0,0,0.15);">
                                <h3 id="prompt-title" style="font-size: 18px; font-weight: 700; color: #333; margin-bottom: 16px;"></h3>
                                <textarea id="prompt-input" rows="3" placeholder="" style="width: 100%; background: #F9FAFB; border-radius: 12px; padding: 12px; color: #333; font-size: 14px; border: none; outline: none; resize: none; margin-bottom: 16px;"></textarea>
                                <div style="display: flex; gap: 12px;">
                                    <button onclick="closePromptModal()" style="flex: 1; padding: 10px; border-radius: 12px; background: #F3F4F6; color: #6B7280; font-weight: 600; font-size: 14px; border: none; cursor: pointer;">ÂèñÊ∂à</button>
                                    <button onclick="submitPrompt()" style="flex: 1; padding: 10px; border-radius: 12px; background: #A0D8EF; color: #FFFFFF; font-weight: 600; font-size: 14px; border: none; cursor: pointer;">ÂèëÈÄÅ</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Nav -->
                    <div class="linee-nav">
                        <div class="linee-nav-item active" data-tab="home">
                            <ion-icon name="home-outline" class="linee-nav-icon"></ion-icon>
                            <span>‰∏ªÈ°µ</span>
                        </div>
                        <div class="linee-nav-item" data-tab="chats">
                            <ion-icon name="chatbubble-ellipses-outline" class="linee-nav-icon"></ion-icon>
                            <span>ËÅäÂ§©</span>
                        </div>
                        <div class="linee-nav-item" data-tab="steps">
                            <ion-icon name="footsteps-outline" class="linee-nav-icon"></ion-icon>
                            <span>Ë∂≥Ë∑°</span>
                        </div>
                        <div class="linee-nav-item" data-tab="diary">
                            <ion-icon name="journal-outline" class="linee-nav-icon"></ion-icon>
                            <span>Êó•ËÆ∞</span>
                        </div>
                        <div class="linee-nav-item" data-tab="wallet">
                            <ion-icon name="wallet-outline" class="linee-nav-icon"></ion-icon>
                            <span>Èí±ÂåÖ</span>
                        </div>
                    </div>

                    <!-- Main Content - Steps Tab -->
                    <div class="linee-main" id="linee-tab-steps" style="display: none; padding: 0;">
                        <!-- Steps Home View -->
                        <div id="steps-home-view" style="display: flex; flex-direction: column; height: 100%; background: #FFFFFF;">
                            <!-- Header -->
                            <div style="padding: 0 12px; display: flex; justify-content: space-between; align-items: center; height: 60px; border-bottom: 1px solid #F5F5F5; margin-top: 32px;">
                                <h1 id="steps-header-title" style="font-size: 20px; font-weight: 800; color: #333; letter-spacing: -0.5px;">Ë∂≥Ëøπ</h1>
                                <div style="display: flex; gap: 12px;">
                                    <button id="steps-delete-btn" class="linee-icon-btn" style="color: #D1D5DB;" disabled><ion-icon name="trash-outline"></ion-icon></button>
                                    <button id="steps-add-btn" class="linee-icon-btn" style="background: rgba(160,216,239,0.1); color: #A0D8EF;"><ion-icon name="add" style="--ionicon-stroke-width: 60px;"></ion-icon></button>
                                </div>
                            </div>
                            <!-- World Cards Scroll -->
                            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; padding-bottom: 80px;">
                                <div id="steps-worlds-container" style="overflow-x: auto; display: flex; align-items: center; padding: 0 24px; gap: 24px; scroll-snap-type: x mandatory; min-height: 440px;">
                                    <div style="width: 100%; text-align: center; color: #9CA3AF; padding: 40px 0;">ÊöÇÊó†‰∏ñÁïåËßÇÔºåÁÇπÂáªÂè≥‰∏äËßí + Êñ∞Â¢û</div>
                                </div>
                                <div id="steps-hint" style="text-align: center; color: #9CA3AF; font-size: 14px; margin-top: 16px;"></div>
                            </div>
                        </div>

                        <!-- World Create View -->
                        <div id="steps-create-view" style="display: none; flex-direction: column; height: 100%; background: #FFFFFF;">
                            <!-- Header -->
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 0 12px; height: 60px; border-bottom: 1px solid #F5F5F5; background: #FFFFFF; margin-top: 32px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <button id="create-back-btn" class="linee-icon-btn"><ion-icon name="chevron-back-outline"></ion-icon></button>
                                    <div class="linee-title">Êñ∞Â¢û‰∏ñÁïåËßÇ</div>
                                </div>
                                <button id="create-save-btn" style="color: #A0D8EF; font-weight: 700; font-size: 14px; padding: 4px 8px; border-radius: 8px; background: none; border: none; cursor: pointer;" disabled>‰øùÂ≠ò</button>
                            </div>
                            <!-- Form -->
                            <div style="flex: 1; overflow-y: auto; padding: 24px 24px 80px; display: flex; flex-direction: column; gap: 24px;">
                                <div>
                                    <label style="font-size: 14px; font-weight: 600; color: #374151; display: block; margin-bottom: 8px;">‰∏ñÁïåËßÇÂêçÁß∞</label>
                                    <input id="create-name" type="text" placeholder="‰æãÂ¶ÇÔºöËµõÂçöÊúãÂÖã 2077" style="width: 100%; background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 12px; padding: 12px 16px; font-size: 14px; outline: none;" />
                                </div>
                                <div>
                                    <label style="font-size: 14px; font-weight: 600; color: #374151; display: block; margin-bottom: 8px;">‰∏ñÁïåËßÇÊèèËø∞</label>
                                    <textarea id="create-desc" placeholder="ÊèèËø∞Ëøô‰∏™‰∏ñÁïåÁöÑËÉåÊôØ„ÄÅÊ∞õÂõ¥..." style="width: 100%; background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 12px; padding: 12px 16px; font-size: 14px; outline: none; min-height: 100px; resize: none;"></textarea>
                                </div>
                                <div>
                                    <label style="font-size: 14px; font-weight: 600; color: #374151; display: block; margin-bottom: 8px;">ÂøÖË¶ÅÂú∞Ê†á (Áî®ÈÄóÂè∑ÂàÜÈöî)</label>
                                    <div style="position: relative;">
                                        <ion-icon name="location-outline" style="position: absolute; left: 12px; top: 14px; font-size: 18px; color: #9CA3AF;"></ion-icon>
                                        <input id="create-landmarks" type="text" placeholder="‰æãÂ¶ÇÔºö‰∏≠Â§ÆÂ°î, Ë¥´Ê∞ëÁ™ü, ËçíÂùÇÂ°î..." style="width: 100%; background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 12px; padding: 12px 16px 12px 40px; font-size: 14px; outline: none;" />
                                    </div>
                                </div>
                                <div>
                                    <label style="font-size: 14px; font-weight: 600; color: #374151; display: block; margin-bottom: 8px;">Âú∞ÂõæÈ¢ÑËßà</label>
                                    <div id="create-map-preview" style="width: 100%; aspect-ratio: 1; background: #F3F4F6; border-radius: 16px; border: 2px dashed #D1D5DB; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; position: relative;">
                                        <p style="color: #9CA3AF; font-size: 14px; margin-bottom: 16px;">Â°´ÂÜôÂÆåÊØïÂêéÁÇπÂáªÁîüÊàê</p>
                                        <button id="create-generate-btn" style="background: #A0D8EF; color: #FFFFFF; padding: 10px 24px; border-radius: 24px; font-weight: 600; box-shadow: 0 2px 8px rgba(160,216,239,0.3); border: none; cursor: pointer; display: flex; align-items: center; gap: 8px;"><ion-icon name="refresh-outline"></ion-icon><span>ÁîüÊàêÂú∞Âõæ</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Character List View -->
                        <div id="steps-charlist-view" style="display: none; flex-direction: column; height: 100%; background: #FFFFFF;">
                            <!-- Header -->
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 0 12px; height: 60px; border-bottom: 1px solid #F5F5F5; background: #FFFFFF; margin-top: 32px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <button id="charlist-back-btn" class="linee-icon-btn"><ion-icon name="chevron-back-outline"></ion-icon></button>
                                    <div>
                                        <div class="linee-title" id="charlist-world-name" style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></div>
                                        <p style="font-size: 10px; color: #9CA3AF;">ËßíËâ≤ÂàóË°®</p>
                                    </div>
                                </div>
                                <div style="position: relative;">
                                    <button id="charlist-menu-btn" class="linee-icon-btn"><ion-icon name="ellipsis-vertical"></ion-icon></button>
                                    <div id="charlist-menu" class="linee-popover hidden" style="right: 0; top: 50px; width: 160px;">
                                        <div class="linee-popover-item" onclick="openAddCharModal()"><ion-icon name="person-add-outline"></ion-icon> Êñ∞Â¢ûËßíËâ≤</div>
                                        <div class="linee-popover-item" onclick="toggleCharDeleteMode()"><ion-icon name="trash-outline"></ion-icon> Âà†Èô§ËßíËâ≤</div>
                                        <div style="height: 1px; background: #F5F5F5; margin: 4px 0;"></div>
                                        <div class="linee-popover-item" onclick="openMapRefreshModal()"><ion-icon name="map-outline"></ion-icon> Âú∞ÂõæÂà∑Êñ∞</div>
                                        <div class="linee-popover-item" onclick="openFootprintSettingsModal()"><ion-icon name="settings-outline"></ion-icon> Ë∂≥ËøπËÆæÂÆö</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Character Grid -->
                            <div style="flex: 1; overflow-y: auto; padding: 16px;">
                                <div id="charlist-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;"></div>
                            </div>
                        </div>

                        <!-- Character Detail View -->
                        <div id="steps-chardetail-view" style="display: none; flex-direction: column; height: 100%; background: #FFFFFF;">
                            <!-- Header (Overlay) -->
                            <div style="position: absolute; top: 32px; left: 0; right: 0; height: 60px; z-index: 20; display: flex; align-items: center; padding: 0 12px; background: linear-gradient(to bottom, rgba(0,0,0,0.4), transparent);">
                                <button id="chardetail-back-btn" class="linee-icon-btn" style="color: #FFFFFF;"><ion-icon name="chevron-back-outline"></ion-icon></button>
                                <span id="chardetail-char-name" class="linee-title" style="color: #FFFFFF; margin-left: 8px; text-shadow: 0 1px 3px rgba(0,0,0,0.3);"></span>
                            </div>
                            <!-- Map Section -->
                            <div id="chardetail-map" style="height: 45%; position: relative; background: #E5E7EB;"></div>
                            <!-- Timeline Section -->
                            <div style="flex: 1; background: #FFFFFF; margin-top: -16px; border-radius: 24px 24px 0 0; position: relative; z-index: 10; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); display: flex; flex-direction: column; overflow: hidden;">
                                <div style="width: 48px; height: 4px; background: #E5E7EB; border-radius: 2px; margin: 12px auto 8px; flex-shrink: 0;"></div>
                                <div id="chardetail-timeline" style="flex: 1; overflow-y: auto; padding: 0 24px 40px;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Steps Modals -->
                    <div id="steps-modal-add-char" class="linee-modal hidden">
                        <div class="linee-modal-content" style="max-height: 70vh; overflow-y: auto;">
                            <h3>‰ªé LINEE Â•ΩÂèã‰∏≠ÈÄâÊã©</h3>
                            <div id="steps-friend-list" style="max-height: 300px; overflow-y: auto; margin: 16px 0;"></div>
                            <div class="linee-modal-actions">
                                <button class="linee-btn-cancel" onclick="closeStepsModal('steps-modal-add-char')">ÂèñÊ∂à</button>
                            </div>
                        </div>
                    </div>

                    <div id="steps-modal-map-refresh" class="linee-modal hidden">
                        <div class="linee-modal-content">
                            <h3>Âú∞ÂõæÂà∑Êñ∞</h3>
                            <p style="font-size: 12px; color: #6B7280; background: #FEF3C7; padding: 8px; border-radius: 8px; margin-bottom: 12px;">‚ö† Ëã•Â∑≤ÁîüÊàê‰ªäÊó•Ë∂≥ËøπÔºåÂà∑Êñ∞Âú∞ÂõæÂ∞Ü‰øùÁïôÊó¢ÊúâËßíËâ≤ÂùêÊ†á</p>
                            <div style="position: relative; margin-bottom: 12px;">
                                <ion-icon name="search-outline" style="position: absolute; left: 12px; top: 12px; font-size: 14px; color: #9CA3AF;"></ion-icon>
                                <input id="map-refresh-keyword" type="text" placeholder="ËæìÂÖ•ÂÖ≥ÈîÆËØçÔºà‰æãÂ¶ÇÔºöÂåóÊñπÊ£ÆÊûóÔºâ..." style="width: 100%; padding: 10px 12px 10px 36px; border: 1px solid #E5E7EB; border-radius: 10px; font-size: 13px; outline: none;" />
                            </div>
                            <div id="map-refresh-preview" style="width: 100%; aspect-ratio: 16/9; background: #F3F4F6; border-radius: 12px; margin-bottom: 12px; overflow: hidden; position: relative;">
                                <div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; color: #9CA3AF; font-size: 12px;">ÁÇπÂáªÂà∑Êñ∞ÊåâÈíÆÈ¢ÑËßà</div>
                            </div>
                            <div id="map-refresh-changelog" style="display: none; background: #F9FAFB; padding: 12px; border-radius: 10px; margin-bottom: 12px; font-size: 12px; color: #374151; line-height: 1.6;"></div>
                            <div class="linee-modal-actions">
                                <button class="linee-btn-cancel" onclick="closeStepsModal('steps-modal-map-refresh')">ÂèñÊ∂à</button>
                                <button id="map-refresh-btn" class="linee-btn-confirm" onclick="executeMapRefresh()">Âà∑Êñ∞</button>
                            </div>
                        </div>
                    </div>

                    <div id="steps-modal-footprint-settings" class="linee-modal hidden">
                        <div class="linee-modal-content" style="max-height: 70vh; overflow-y: auto;">
                            <h3>Ë∂≥ËøπËÆæÂÆö</h3>
                            <button onclick="generateAllFootprints()" style="width: 100%; background: linear-gradient(135deg, #A0D8EF, #8FCCE5); color: #FFFFFF; padding: 14px; border-radius: 12px; font-weight: 700; border: none; cursor: pointer; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; gap: 8px;"><ion-icon name="flash-outline"></ion-icon>‰∏ÄÈîÆÁîüÊàêÂÖ®ÂëòË∂≥Ëøπ</button>
                            <p style="font-size: 11px; text-align: center; color: #9CA3AF; margin-bottom: 16px;">Á≥ªÁªüÂ∞ÜËá™Âä®ÊºîÁÆó‰ªäÊó•ÊâÄÊúâËßíËâ≤ÁöÑ‰∫íÂä®‰∏éË∑ØÂæÑ</p>
                            <div style="height: 1px; background: #E5E7EB; margin: 16px 0;"></div>
                            <h4 style="font-size: 14px; font-weight: 700; color: #374151; margin-bottom: 12px;">Âçï‰∫∫ÁîüÊàêËÆæÂÆö</h4>
                            <div id="footprint-char-list" style="display: flex; flex-direction: column; gap: 8px;"></div>
                            <div class="linee-modal-actions" style="margin-top: 16px;">
                                <button class="linee-btn-cancel" onclick="closeStepsModal('steps-modal-footprint-settings')">ÂÖ≥Èó≠</button>
                            </div>
                        </div>
                    </div>

                    <!-- Modals -->
                    <div id="linee-modal-add-friend" class="linee-modal hidden">
                        <div class="linee-modal-content">
                            <h3>Ê∑ªÂä†Â•ΩÂèã</h3>
                            <input type="text" id="linee-new-friend-name" placeholder="ËæìÂÖ•Â•ΩÂèãÂêçÂ≠ó">
                            <div class="linee-modal-actions">
                                <button class="linee-btn-cancel" onclick="closeLineeModal('linee-modal-add-friend')">ÂèñÊ∂à</button>
                                <button class="linee-btn-confirm" onclick="confirmLineeAddFriend()">Ê∑ªÂä†</button>
                            </div>
                        </div>
                    </div>

                    <div id="linee-modal-add-group" class="linee-modal hidden">
                        <div class="linee-modal-content">
                            <h3>Âª∫Á´ãÁæ§ÁªÑ</h3>
                            <div class="linee-avatar-upload">
                                <div class="linee-circle-preview">G</div>
                                <span class="linee-upload-hint">Êõ¥Êç¢Â§¥ÂÉè</span>
                            </div>
                            <input type="text" id="linee-new-group-name" placeholder="Áæ§ÁªÑÂêçÁß∞">
                            <div class="linee-checkbox-container">
                                <input type="checkbox" id="linee-check-join" checked>
                                <span>Êàë‰πüÂä†ÂÖ•Ê≠§Áæ§ÁªÑ</span>
                            </div>
                            <div class="linee-modal-actions">
                                <button class="linee-btn-cancel" onclick="closeLineeModal('linee-modal-add-group')">ÂèñÊ∂à</button>
                                <button class="linee-btn-confirm" onclick="confirmLineeAddGroup()">Âª∫Á´ã</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Linee ‰∏™‰∫∫ËÆæÂÆöÈ°µ -->
            <div id="linee-profile-settings" class="app-window hidden">
                <div id="linee-settings-header">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <button class="linee-icon-btn" onclick="closeLineeProfileSettings()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                        <div class="linee-title">‰∏™‰∫∫ËÆæÂÆö</div>
                    </div>
                    <div></div>
                </div>
                <div class="linee-settings-content">
                    <!-- ÂΩìÂâçÁºñËæëÂå∫ -->
                    <div class="linee-settings-edit">
                        <div class="linee-settings-avatar-section">
                            <div class="linee-settings-avatar-wrapper">
                                <img id="linee-edit-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar">
                                <button class="linee-avatar-change-btn" onclick="changeLineeAvatar()">
                                    <ion-icon name="camera-outline"></ion-icon>
                                </button>
                            </div>
                        </div>
                        <div class="linee-settings-input-group">
                            <label>ÂêçÂ≠ó</label>
                            <input type="text" id="linee-edit-name" placeholder="ËæìÂÖ•ÂêçÂ≠ó" value="ÊàëÁöÑÂêçÂ≠ó">
                        </div>
                        <div class="linee-settings-input-group">
                            <label>Áä∂ÊÄÅÊ∂àÊÅØ</label>
                            <input type="text" id="linee-edit-status-input" placeholder="ËÆæÂÆöÁä∂ÊÄÅÊ∂àÊÅØ..." value="ËÆæÂÆöÁä∂ÊÄÅÊ∂àÊÅØ..." maxlength="20">
                        </div>
                        <div class="linee-settings-input-group">
                            <label>ÊàëÁöÑËÆæÂÆö</label>
                            <textarea id="linee-edit-settings" placeholder="ËæìÂÖ•ÊàëÁöÑËÆæÂÆö..." rows="5"></textarea>
                        </div>
                        <button class="linee-save-profile-btn" onclick="saveLineeProfile()">‰øùÂ≠òËá≥Âç°ÊßΩ</button>
                    </div>

                    <!-- ‰∫∫Áâ©Âç°Âå∫ -->
                    <div class="linee-persona-cards-section">
                        <h4>‰∫∫Áâ©Âç°</h4>
                        <div class="linee-persona-cards-grid">
                            <div class="linee-persona-card" data-slot="0" onclick="selectPersonaCard(0)">
                                <div class="linee-persona-card-avatar">
                                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="">
                                </div>
                                <div class="linee-persona-card-info">
                                    <div class="linee-persona-card-name">ÊàëÁöÑÂêçÂ≠ó</div>
                                    <div class="linee-persona-card-status">ËÆæÂÆöÁä∂ÊÄÅÊ∂àÊÅØ...</div>
                                </div>
                                <div class="linee-persona-card-active">‚úì</div>
                            </div>
                            <div class="linee-persona-card linee-persona-card-empty" data-slot="1" onclick="selectPersonaCard(1)">
                                <div class="linee-persona-card-empty-icon">+</div>
                                <div class="linee-persona-card-empty-text">Á©∫Âç°ÊßΩ</div>
                            </div>
                            <div class="linee-persona-card linee-persona-card-empty" data-slot="2" onclick="selectPersonaCard(2)">
                                <div class="linee-persona-card-empty-icon">+</div>
                                <div class="linee-persona-card-empty-text">Á©∫Âç°ÊßΩ</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="chat-window" class="app-window hidden">
                <div class="app-header">
                    <button class="back-btn">‚Üê</button>
                    <h3 id="chat-title">AI Âä©Êâã</h3>
                </div>
                <div id="chat-messages"></div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="ËæìÂÖ•Ê∂àÊÅØ...">
                    <button id="send-btn">ÂèëÈÄÅ</button>
                </div>
            </div>

            <div id="calendar-app" class="app-window hidden">
                <div class="app-header">
                    <button class="back-btn">‚Üê</button>
                    <h3>Êó•ÂéÜ</h3>
                </div>
                <div id="calendar-full"></div>
                <div id="memo-area">
                    <h4 id="memo-date-title">Â§áÂøòÂΩï</h4>
                    <textarea id="memo-input" placeholder="ËæìÂÖ•Â§áÂøòÂΩï..."></textarea>
                    <button id="save-memo">‰øùÂ≠ò</button>
                </div>
            </div>

            <div id="music-search-modal" class="app-window hidden">
                <div class="app-header">
                    <button class="back-btn">‚Üê</button>
                    <h3>ÊêúÁ¥¢Èü≥‰πê</h3>
                </div>
                <div class="search-area">
                    <input type="text" id="music-search-input" placeholder="ÊêúÁ¥¢Ê≠åÊõ≤ÊàñÊ≠åÊâã...">
                    <button id="do-search">ÊêúÁ¥¢</button>
                </div>
                <div id="search-results"></div>
            </div>

            <div id="music-fav-modal" class="app-window hidden">
                <div class="app-header">
                    <button class="back-btn">‚Üê</button>
                    <h3>ÊàëÁöÑÊ≠åÂçï</h3>
                </div>
                <div id="fav-list"></div>
            </div>

            <div id="add-music-modal" class="app-window hidden">
                <div class="app-header">
                    <button class="back-btn">‚Üê</button>
                    <h3>Ê∑ªÂä†Èü≥‰πê</h3>
                </div>
                <div style="padding:20px;">
                    <div style="margin-bottom:20px;">
                        <label style="display:block;margin-bottom:8px;font-weight:bold;">Ê≠åÊõ≤ÂêçÁß∞</label>
                        <input type="text" id="add-music-title" placeholder="ËæìÂÖ•Ê≠åÊõ≤ÂêçÁß∞" style="width:100%;padding:12px;border-radius:10px;border:2px solid #e8e8e8;font-size:14px;">
                    </div>
                    <div style="margin-bottom:20px;">
                        <label style="display:block;margin-bottom:8px;font-weight:bold;">Ê≠åÊâã</label>
                        <input type="text" id="add-music-artist" placeholder="ËæìÂÖ•Ê≠åÊâãÂêçÁß∞" style="width:100%;padding:12px;border-radius:10px;border:2px solid #e8e8e8;font-size:14px;">
                    </div>
                    <div style="margin-bottom:20px;">
                        <label style="display:block;margin-bottom:8px;font-weight:bold;">Èü≥‰πêÊù•Ê∫ê</label>
                        <input type="url" id="add-music-url" placeholder="Á≤òË¥¥ MP3 ÈìæÊé•Êàñ URL" style="width:100%;padding:12px;border-radius:10px;border:2px solid #e8e8e8;font-size:14px;margin-bottom:10px;">
                        <div style="text-align:center;margin:10px 0;color:#999;font-size:12px;">‚îÄ‚îÄ‚îÄ Êàñ ‚îÄ‚îÄ‚îÄ</div>
                        <input type="file" id="add-music-file" accept="audio/*" style="width:100%;padding:12px;border-radius:10px;border:2px solid #e8e8e8;font-size:14px;">
                        <div style="font-size:11px;color:#999;margin-top:5px;">ÊîØÊåÅ MP3„ÄÅWAV„ÄÅOGG Á≠âÈü≥È¢ëÊ†ºÂºè</div>
                    </div>
                    <button id="confirm-add-music" style="width:100%;padding:15px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;border-radius:15px;font-size:16px;font-weight:bold;cursor:pointer;">Ê∑ªÂä†Âà∞Êí≠ÊîæÂàóË°®</button>
                </div>
            </div>

            <div id="lyric-float" class="hidden">
                <div id="lyric-text">ÊöÇÊó†Ê≠åËØç</div>
                <button id="close-lyric">√ó</button>
            </div>
        </div>
    </div>

    <input type="file" id="hidden-file-input" accept=".json" style="display:none">
    <input type="file" id="hidden-theme-input" accept=".json" style="display:none">
    <audio id="music-player" style="display:none"></audio>
    <style id="custom-style"></style>
    <style id="custom-font"></style>
    <!-- ‰ΩøÁî®ÂñÆ‰∏ÄÊñá‰ª∂ÁâàÊú¨ÔºàÊé®Ëñ¶Ôºâ -->
    <script src="app.js"></script>
    <!-- Êàñ‰ΩøÁî®Ê®°Â°äÂåñÁâàÊú¨ÔºàÂèñÊ∂à‰∏ãÈù¢ÁöÑË®ªÈáã‰∏¶Ë®ªÈáãÊéâ‰∏äÈù¢ÁöÑ app.jsÔºâ
    <script src="js/state.js"></script>
    <script src="js/statusbar.js"></script>
    <script src="js/home.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/apps.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/music.js"></script>
    <script src="js/main.js"></script>
    -->
</body>
</html>
