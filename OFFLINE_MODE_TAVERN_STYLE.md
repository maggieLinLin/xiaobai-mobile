# 📖 线下模式酒馆风格更新

## ✅ 已完成的修改

### 1. **时钟字体适度放大** ⏰

**修改**: 在不增加组件大小的情况下放大字体

```css
/* css/home.css */

#current-time {
    font-size: 48px;    /* 从 36px → 48px (增加 33%) */
    font-weight: 200;
    letter-spacing: -1px;
}

#current-date {
    font-size: 14px;    /* 从 12px → 14px (增加 17%) */
    font-weight: 500;
    letter-spacing: 0.5px;
}

/* 组件大小保持不变 */
#time-widget {
    max-width: 70%;     /* 宽度限制保持不变 */
    padding: 8px 20px;  /* 内边距保持不变 */
}
```

**效果**:
- ✅ 时间更清晰易读
- ✅ 组件大小未增加
- ✅ 不会覆盖更多壁纸

---

### 2. **线下模式改为酒馆风格** 🎭

#### 设计参考: SillyTavern 经典界面

**特点**:
- 深色主题 (黑色背景)
- 大字体阅读
- 简洁边框
- 清晰层次

---

#### 新样式实现

##### A. 整体容器
```javascript
// 线下模式容器样式
container.style.padding = '20px 16px';
container.style.background = '#1a1a1a';  // 深黑色背景
container.style.color = '#e0e0e0';       // 浅灰色文字
```

##### B. 用户消息样式
```html
<div style="display: flex; justify-content: flex-end; margin: 16px 0;">
    <div style="
        max-width: 80%; 
        padding: 12px 16px; 
        background: #2a4a5a;              /* 深蓝灰色背景 */
        border-radius: 12px; 
        border-left: 3px solid #5a9fb8;   /* 蓝色左边框 */
    ">
        <div style="
            font-size: 16px;                /* 较大字体 */
            line-height: 1.6; 
            color: #e8f4f8;                 /* 浅蓝白色 */
            white-space: pre-wrap;
            font-family: 'Source Han Sans CN', sans-serif;
        ">
            ${用户消息内容}
        </div>
        <div style="
            font-size: 11px; 
            color: #88a0aa; 
            margin-top: 6px; 
            text-align: right;
        ">
            ${时间}
        </div>
    </div>
</div>
```

**视觉特征**:
- 右对齐
- 深蓝灰色背景
- 蓝色左边框强调
- 字体 16px

##### C. AI 回复样式（酒馆格式）
```html
<div style="
    margin: 20px 0; 
    padding: 16px; 
    background: #252525;          /* 深灰色背景 */
    border-radius: 8px; 
    border: 1px solid #333;       /* 细边框 */
">
    <!-- 主要内容 -->
    <div style="
        font-size: 17px;            /* 阅读友好字体 */
        line-height: 1.8;           /* 舒适行高 */
        color: #d4d4d4;             /* 浅灰色文字 */
        white-space: pre-wrap;
        font-family: 'Source Han Sans CN', sans-serif;
        letter-spacing: 0.3px;      /* 字间距 */
    ">
        ${AI 回复内容}
    </div>
    
    <!-- 底部时间戳 -->
    <div style="
        margin-top: 12px; 
        padding-top: 8px; 
        border-top: 1px solid #333;  /* 分隔线 */
        font-size: 11px; 
        color: #777; 
        text-align: right;
    ">
        ${时间}
    </div>
</div>
```

**视觉特征**:
- 左对齐全宽
- 深灰色卡片背景
- 细边框包裹
- 字体 17px（大字阅读）
- 底部时间戳分隔

---

### 📊 模式对比

#### 线上模式 (聊天气泡)
```
┌─────────────────────────────┐
│ 白色背景                     │
│                              │
│  [头像] 你好！           │
│                [Hello]  👤  │
│  [头像] 最近怎么样？     │
│                              │
│ • 14px 字体                  │
│ • 圆角气泡                   │
│ • 紧凑布局                   │
└─────────────────────────────┘
```

#### 线下模式 (酒馆风格)
```
┌─────────────────────────────┐
│ 深黑色背景 (#1a1a1a)         │
│                              │
│              ┌──────────────┐│
│              │ 你好 (16px)  ││
│              │ [时间]        ││
│              └──────────────┘│
│                              │
│ ┌──────────────────────────┐│
│ │ 嗨！你好呀~ (17px)        ││
│ │                           ││
│ │ 很高兴认识你。            ││
│ │                           ││
│ │ ─────────────────────────││
│ │ [时间]                    ││
│ └──────────────────────────┘│
│                              │
│ • 17px 大字体                │
│ • 卡片式布局                 │
│ • 舒适阅读间距               │
└─────────────────────────────┘
```

---

### 🎨 颜色方案

#### 深色主题配色
```css
/* 背景色 */
--bg-main: #1a1a1a;        /* 主背景 (深黑) */
--bg-card: #252525;        /* 卡片背景 (深灰) */
--bg-user: #2a4a5a;        /* 用户消息 (深蓝灰) */

/* 文字色 */
--text-main: #d4d4d4;      /* 主文字 (浅灰) */
--text-user: #e8f4f8;      /* 用户文字 (浅蓝白) */
--text-meta: #777;         /* 次要信息 (灰) */

/* 边框和强调 */
--border: #333;            /* 边框 */
--accent: #5a9fb8;         /* 强调色 (蓝) */
```

#### 与线上模式对比
| 元素 | 线上模式 | 线下模式 (酒馆) |
|------|---------|----------------|
| 背景 | #FFFFFF (白) | #1a1a1a (黑) |
| 文字 | #333 (深灰) | #d4d4d4 (浅灰) |
| 用户消息背景 | #A0D8EF (蓝) | #2a4a5a (深蓝灰) |
| AI 消息背景 | #FFFFFF (白) | #252525 (深灰) |
| 字体大小 | 14px | 17px |
| 行高 | 1.6 | 1.8 |

---

### 📐 字体和排版

#### 线下模式排版规范

**用户消息**:
```css
font-size: 16px;
line-height: 1.6;
max-width: 80%;
padding: 12px 16px;
border-radius: 12px;
```

**AI 回复**:
```css
font-size: 17px;         /* 大字阅读 */
line-height: 1.8;        /* 舒适行距 */
letter-spacing: 0.3px;   /* 字间距 */
padding: 16px;
border-radius: 8px;
```

**为什么选择 17px？**
- ✅ 长文本阅读最佳字号
- ✅ 在手机屏幕上清晰舒适
- ✅ 不会过大导致滚动频繁
- ✅ 符合酒馆用户习惯

---

### 🔄 模式切换效果

#### 切换到线下模式
```javascript
chatSettings.offlineMode = true;

// 自动应用样式
container.style.background = '#1a1a1a';   // 深色背景
// AI 回复使用 17px 大字体
// 卡片式布局
// 时间戳在底部分隔
```

#### 切换回线上模式
```javascript
chatSettings.offlineMode = false;

// 恢复原样式
container.style.background = '#FFFFFF';   // 白色背景
// 气泡样式
// 14px 标准字体
// 紧凑布局
```

---

### 🧪 测试步骤

#### 测试 1: 时钟字体
```
1. 返回手机主屏幕
2. 查看时钟显示
3. ✅ 确认时间清晰易读
4. ✅ 确认组件大小未增加
5. ✅ 确认不会遮挡更多壁纸
```

#### 测试 2: 酒馆风格
```
1. 进入 AI 角色聊天
2. 打开聊天设置
3. 开启 "线下模式 (网文阅读)" ✅
4. 保存设定
5. 返回聊天室
6. ✅ 确认背景变为深黑色
7. 发送消息
8. ✅ 确认用户消息右对齐，深蓝灰背景
9. 等待 AI 回复 (需开启自动回复)
10. ✅ 确认 AI 回复为卡片式，17px 大字
11. ✅ 确认时间戳在底部带分隔线
12. ✅ 确认阅读舒适
```

#### 测试 3: 模式切换
```
1. 当前线下模式
2. 打开聊天设置
3. 关闭 "线下模式" ❌
4. 保存
5. ✅ 确认立即切换回气泡风格
6. ✅ 确认背景变白色
7. ✅ 确认字体变回 14px
```

---

### 📱 视觉效果示例

#### 线下模式 (酒馆风格) 消息示例

**场景**: 用户与 AI 角色 "小雪" 的对话

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━
[深黑色背景 #1a1a1a]

                  ┌─────────────┐
                  │ 你好！      │ (16px, 浅蓝白)
                  │ 12:30       │
                  └─────────────┘
                  (深蓝灰背景 #2a4a5a)

┌────────────────────────────┐
│ 嗨！你好呀~                 │
│                             │
│ 很高兴认识你。我是小雪，    │
│ 一个喜欢阅读和音乐的普通女  │
│ 生。                        │
│                             │
│ 今天天气不错，你有什么计划  │
│ 吗？                        │
│                             │
│ ────────────────────────── │
│ 12:30                       │
└────────────────────────────┘
(深灰卡片 #252525, 17px 大字体)

                  ┌─────────────┐
                  │ 我想去公园  │
                  │ 散步        │
                  │ 12:31       │
                  └─────────────┘

┌────────────────────────────┐
│ 那太好了！                  │
│                             │
│ 这个季节去公园特别舒服，树  │
│ 叶都变成金黄色了。          │
│                             │
│ 记得带件外套哦，下午可能会  │
│ 有点凉。                    │
│                             │
│ ────────────────────────── │
│ 12:31                       │
└────────────────────────────┘

━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 🎯 设计原则

#### 酒馆风格核心特点
1. **深色护眼**: 长时间阅读不刺眼
2. **大字体**: 17px 适合阅读大段文本
3. **清晰层次**: 卡片式布局区分消息
4. **舒适间距**: line-height: 1.8
5. **简洁优雅**: 细边框，不过度装饰

#### 与网文风格的区别
| 特性 | 网文风格 | 酒馆风格 |
|------|---------|---------|
| 背景 | 米白色 | 深黑色 |
| 段首缩进 | ✅ 2em | ❌ 无 |
| 引用块 | ✅ 蓝色边框 | ❌ 卡片 |
| 布局 | 页面式 | 对话式 |
| 适用场景 | 小说阅读 | 角色对话 |

---

### 💡 使用建议

#### 何时使用线下模式？

**推荐场景**:
```
✅ 长文本 AI 回复
✅ 沉浸式角色扮演
✅ 深夜聊天 (护眼)
✅ 剧情向对话
✅ 详细描写场景
```

**不推荐场景**:
```
❌ 快速短句交流
❌ 多人群聊
❌ 纯文字指令
❌ 白天强光环境
```

#### 最佳配置
```
线下模式 + 以下设置：
├─ 自动回复: 开启 ✅
├─ 上下文记忆: 30-50 条
├─ AI 提示词: 使用详细描写风格
└─ 世界书: 关联相关背景设定
```

---

### 📋 修改文件清单

#### 1. css/home.css
```css
/* 第 119-133 行 */
#current-time {
    font-size: 48px;  /* 36px → 48px */
}

#current-date {
    font-size: 14px;  /* 12px → 14px */
}
```

#### 2. js/linee.js
```javascript
/* 第 265-281 行 - renderChatMessages() */

if (isOfflineMode) {
    // 新增酒馆风格样式
    container.style.background = '#1a1a1a';
    
    // 用户消息：右对齐，深蓝灰背景，16px
    // AI 回复：卡片式，深灰背景，17px 大字
}
```

---

### ✅ 完成清单

- [x] 时钟字体放大 (36px → 48px)
- [x] 日期字体放大 (12px → 14px)
- [x] 组件大小保持不变
- [x] 线下模式改为深色主题
- [x] AI 回复字体增大到 17px
- [x] 采用酒馆卡片式布局
- [x] 用户消息右对齐样式
- [x] 时间戳底部分隔显示
- [x] 保持模式切换功能

---

**所有修改已完成！时钟更清晰，线下模式更适合阅读。** 🎉

