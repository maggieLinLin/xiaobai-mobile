<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LINEE - Home</title>
    <!-- Ionicons for iOS style outline icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="css/linee-home.css">
</head>
<body>
    <div class="phone-container">
        <!-- Status Bar (Simulated) -->
        <div class="status-bar">
            <div class="left-time">12:00</div>
            <div class="right-icons">
                <ion-icon name="cellular-outline"></ion-icon>
                <ion-icon name="wifi-outline"></ion-icon>
                <ion-icon name="battery-full-outline"></ion-icon>
            </div>
        </div>

        <!-- Top Header (Layer 1) -->
        <header class="app-header">
            <div class="header-title">LINEE</div>
            <div class="header-actions">
                <button class="icon-btn" id="btn-favorites"><ion-icon name="star-outline"></ion-icon></button>
                <button class="icon-btn" id="btn-notifications"><ion-icon name="notifications-outline"></ion-icon></button>
                <div class="add-container">
                    <button class="icon-btn" id="btn-add"><ion-icon name="person-add-outline"></ion-icon></button>
                    <!-- Add Popover -->
                    <div class="popover hidden" id="add-popover">
                        <div class="popover-item" id="opt-add-friend">
                            <ion-icon name="person-outline"></ion-icon> 加入好友
                        </div>
                        <div class="popover-item" id="opt-add-group">
                            <ion-icon name="people-outline"></ion-icon> 建立群組
                        </div>
                    </div>
                </div>
                <button class="icon-btn" id="btn-settings"><ion-icon name="settings-outline"></ion-icon></button>
            </div>
        </header>

        <!-- Main Content Area (Layers 2, 3, 4) -->
        <main class="main-content">
            
            <!-- Layer 2: Personal Info & Settings Cards -->
            <section class="personal-section" id="personal-section">
                <div class="profile-row">
                    <div class="profile-info">
                        <h1 class="my-name">我的名字</h1>
                        <p class="status-msg text-editable" contenteditable="true">設定狀態訊息...</p>
                    </div>
                    <div class="profile-avatar">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar">
                        <div class="edit-badge"><ion-icon name="pencil"></ion-icon></div>
                    </div>
                </div>
                
                <!-- New: 3 Personal Setting Cards -->
                <div class="persona-cards">
                    <div class="p-card active">
                        <span class="p-label">日常</span>
                    </div>
                    <div class="p-card">
                        <span class="p-label">工作</span>
                    </div>
                    <div class="p-card">
                        <span class="p-label">休閒</span>
                    </div>
                </div>
            </section>

            <!-- Layer 3: Search Bar -->
            <section class="search-section">
                <div class="search-bar">
                    <ion-icon name="search-outline"></ion-icon>
                    <input type="text" placeholder="搜尋好友、群組" id="search-input">
                </div>
            </section>

            <!-- Layer 4: Main Utility Lists (Accordion style) -->
            <section class="utility-lists">
                
                <!-- Birthdays -->
                <div class="list-group" id="group-birthdays">
                    <div class="list-header">
                        <div class="header-text">
                            <span class="title">當月壽星</span>
                            <span class="subtitle">小明, Amy, Jason...</span>
                        </div>
                        <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
                    </div>
                </div>

                <!-- Favorites -->
                <div class="list-group" id="group-favorites">
                    <div class="list-header">
                        <div class="header-text">
                            <span class="title">我的最愛</span>
                            <span class="subtitle">媽媽, 老闆, Bestie...</span>
                        </div>
                        <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
                    </div>
                </div>

                <!-- Friends -->
                <div class="list-group expanded" id="group-friends">
                    <div class="list-header" onclick="toggleList('friends-list', this)">
                        <div class="header-text">
                            <span class="title">好友</span>
                            <span class="count" id="friend-count">(5)</span>
                        </div>
                        <ion-icon name="chevron-down-outline" class="arrow-icon"></ion-icon>
                    </div>
                    <div class="list-content" id="friends-list">
                        <!-- Dynamic Friend Items -->
                    </div>
                </div>

                <!-- Groups -->
                <div class="list-group" id="group-groups">
                    <div class="list-header" onclick="toggleList('groups-list', this)">
                        <div class="header-text">
                            <span class="title">群組</span>
                            <span class="count" id="group-count">(2)</span>
                        </div>
                        <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
                    </div>
                    <div class="list-content hidden" id="groups-list">
                        <!-- Dynamic Group Items -->
                    </div>
                </div>

            </section>
        </main>

        <!-- Bottom Navigation Bar (Layer 5) -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-tab="home">
                <ion-icon name="home-outline"></ion-icon>
                <span>主頁</span>
            </div>
            <div class="nav-item" data-tab="chats">
                <ion-icon name="chatbubble-ellipses-outline"></ion-icon>
                <span>聊天</span>
            </div>
            <div class="nav-item" data-tab="steps">
                <ion-icon name="footsteps-outline"></ion-icon>
                <span>足跡</span>
            </div>
            <div class="nav-item" data-tab="diary">
                <ion-icon name="journal-outline"></ion-icon>
                <span>日記</span>
            </div>
            <div class="nav-item" data-tab="wallet">
                <ion-icon name="wallet-outline"></ion-icon>
                <span>錢包</span>
            </div>
        </nav>
    </div>

    <!-- Modals -->
    <!-- Add Friend Modal -->
    <div id="modal-add-friend" class="modal hidden">
        <div class="modal-content">
            <h3>添加好友</h3>
            <input type="text" id="new-friend-name" placeholder="輸入好友名字">
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('modal-add-friend')">取消</button>
                <button class="btn-confirm" onclick="confirmAddFriend()">添加</button>
            </div>
        </div>
    </div>

    <!-- Add Group Modal -->
    <div id="modal-add-group" class="modal hidden">
        <div class="modal-content">
            <h3>建立群組</h3>
            <div class="avatar-upload">
                <div class="circle-preview">G</div>
                <span class="upload-hint">更換頭像</span>
            </div>
            <input type="text" id="new-group-name" placeholder="群組名稱">
            <label class="checkbox-container">
                <input type="checkbox" id="check-join" checked>
                <span class="checkmark"></span>
                我也加入此群組
            </label>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeModal('modal-add-group')">取消</button>
                <button class="btn-confirm" onclick="confirmAddGroup()">建立</button>
            </div>
        </div>
    </div>

    <script src="js/linee-home.js"></script>
</body>
</html>

